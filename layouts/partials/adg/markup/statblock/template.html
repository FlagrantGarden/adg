{{- $Data := . -}}
{{- $stats := dict -}}
{{- $level := 2 -}}
{{- with $Data.Stats -}}
    {{- $stats = .                            -}}
    {{- $level = $Data.Level | default $level -}}
{{- else -}}
    {{- $stats = $Data -}}
{{- end -}}
{{- with $appearing := $stats.appearing -}}
    {{- if in $appearing "d" -}}
        {{- $appearing = printf "![roll:%s](preset:adg_statblock)" $appearing | markdownify -}}
    {{- else -}}
        {{- $appearing = printf "<span>%v</span>" $appearing -}}
    {{- end -}}
    {{- $stats = merge $stats (dict "appearing" $appearing) -}}
{{- end -}}
{{- $ID := $stats.name | urlize | safeHTMLAttr -}}

<sl-card class="adg-statblock" >
    <div slot="header">
        <h{{ print $level | safeHTML }} id="{{ $ID }}">{{ $stats.name }}</h3>
        <dl class="stat-block">
            <dt>HD</dt>
            <dd>{{ $stats.hd }}</dd>
            <dt>AC</dt>
            <dd>{{ $stats.ac }}</dd>
        </dl>
    </div>
    {{ $stats.description | page.RenderString (dict "display" "block") -}}
    <dl slot="footer">
        <dt><span>No. Appearing</span></dt>
        <dd>{{ $stats.appearing | safeHTML }}</dd>
    </dl>
</sl-card>